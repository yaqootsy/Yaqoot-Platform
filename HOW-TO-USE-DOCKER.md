إليك شرحًا دقيقًا ومختصرًا وعمليًا **لأهم أوامر Docker و Docker Compose** التي ستحتاجها يوميًا أثناء تطوير مشروع ياقوت أو أي مشروع آخر.

# ------------------------------------------

# ✔ أولًا: أوامر Docker Compose الأساسية

# ------------------------------------------

## 1) تشغيل المشروع

```
docker compose up -d
```

### ماذا يفعل؟

* يشغّل **جميع الخدمات** الموجودة داخل `docker-compose.yml`
* يعمل بوضع **Detached mode** (بالخلفية)
* ينشئ الحاويات إذا لم تكن موجودة
* يشغّل MySQL – PHP – Nginx – Typesense – Queue …

### متى أستخدمه؟

عندما تفتح المشروع لأول مرة، أو بعد إعادة تشغيل الجهاز.

---

## 2) إيقاف جميع الحاويات

```
docker compose down
```

### ماذا يفعل؟

* يوقف جميع الحاويات التشغيلية
* يحذف الحاويات فقط، *ولا يحذف الداتا* لأن الداتا محفوظة في volumes

### متى أستخدمه؟

* عند الحاجة لإعادة تشغيل كل شيء
* قبل إعادة بناء صور Docker

---

## 3) إعادة تشغيل الحاويات بدون بناء

```
docker compose restart
```

### ماذا يفعل؟

* يوقف ثم يشغّل كل الحاويات بسرعة
* لا يعيد البناء
* مفيد بعد تغيير env

---

## 4) إعادة بناء Container واحد أو كل المشروع

### أ) بناء الخدمة app فقط:

```
docker compose build app
```

### ب) إعادة البناء من الصفر (بدون كاش):

```
docker compose build --no-cache app
```

### ج) إعادة بناء جميع الخدمات:

```
docker compose build
```

### متى أستخدمها؟

* عند تعديل Dockerfile
* عند تغيير PHP extensions
* عند إضافة مكتبة system جديدة

---

## 5) تشغيل المشروع بعد البناء

```
docker compose up -d
```

---

# ------------------------------------------

# ✔ ثانيًا: أوامر Docker الأساسية للحاويات

# ------------------------------------------

## 6) عرض جميع الحاويات العاملة

```
docker ps
```

### ماذا يعطيك؟

* أسماء الحاويات
* الـ ports
* حالة التشغيل
* أسماء الخدمات: yaqoot_app – yaqoot_db – yaqoot_typesense …

---

## 7) الدخول إلى حاوية محددة (مثل SSH)

```
docker exec -it yaqoot_app bash
```

### ماذا يفعل؟

* يعطيك Terminal داخل الحاوية نفسها
* يمكنك تشغيل:

  ```
  php artisan migrate
  php artisan config:clear
  php artisan queue:work
  npm install
  ```

---

## 8) إيقاف حاوية معينة

```
docker stop yaqoot_app
```

---

## 9) تشغيل حاوية معينة

```
docker start yaqoot_app
```

---

## 10) حذف حاوية معينة (بدون حذف الداتا)

```
docker rm yaqoot_app
```

---

# ------------------------------------------

# ✔ ثالثًا: أوامر التعامل مع الصور Images

# ------------------------------------------

## 11) عرض جميع الصور

```
docker images
```

## 12) حذف صورة

```
docker rmi image_name
```

---

# ------------------------------------------

# ✔ رابعًا: أوامر التعامل مع الـ Logs

# ------------------------------------------

## 13) رؤية لوج الحاوية مباشرة

مثال: رؤية لوج Laravel Queue:

```
docker compose logs -f queue
```

رؤية لوج Typesense:

```
docker compose logs -f typesense
```

رؤية لوج App (Laravel):

```
docker compose logs -f app
```

---

# ------------------------------------------

# ✔ خامسًا: التعامل مع الـ volumes (الداتا)

# ------------------------------------------

## 14) عرض الـ volumes

```
docker volume ls
```

## 15) حذف volume (يحذف البيانات نهائيًا)

```
docker volume rm yaqoot_db_data
```

---

# ------------------------------------------

# ✔ مخطط عملي واضح جداً

# ------------------------------------------

| الهدف                               | الأمر                                 |
| ----------------------------------- | ------------------------------------- |
| تشغيل المشروع                       | `docker compose up -d`                |
| إيقاف المشروع                       | `docker compose down`                 |
| إعادة التشغيل                       | `docker compose restart`              |
| الدخول للحاوية                      | `docker exec -it yaqoot_app bash`     |
| تنفيذ أوامر Laravel                 | داخل الحاوية                          |
| إعادة بناء app بعد تعديل Dockerfile | `docker compose build app`            |
| بناء بدون كاش                       | `docker compose build --no-cache app` |
| عرض اللوجات                         | `docker compose logs -f app`          |
| عرض الحاويات                        | `docker ps`                           |




الفارق واضح وبسيط جدًا، لكنه **مهم للغاية** في طريقة تشغيل المشروع.

# ------------------------------------------

# ✔ docker compose up

# ------------------------------------------

## ماذا يفعل؟

* يشغّل جميع الحاويات (services) المحددة في `docker-compose.yml`.
* **يعرض الـ Logs مباشرة داخل نفس الشاشة**.
* يظل الـ Terminal مشغولًا ويمنعك من كتابة أوامر أخرى.
* إذا أغلقت الـ Terminal → يتم إيقاف جميع الحاويات.

## متى يُستخدم؟

* عندما تريد رؤية الـ logs لحظة بلحظة أثناء التشغيل.
* عند فحص الأخطاء أو متابعة السلوك أثناء التطوير.

---

# ------------------------------------------

# ✔ docker compose up -d

# ------------------------------------------

## ماذا يفعل؟

* يشغّل الحاويات **في الخلفية (detached mode)**.
* لا يظهر أي لوجات في الشاشة.
* يرجع الـ Terminal ليكون جاهزًا لأوامر أخرى.
* الحاويات تبقى تعمل حتى لو أغلقت الـ Terminal.

## متى يُستخدم؟

* عند تشغيل المشروع بشكل طبيعي.
* عندما تريد أن تبقى الحاويات تعمل دائمًا في الخلفية.
* للاستخدام اليومي.

---

# ------------------------------------------

# ✔ جدول مقارنة سريع

# ------------------------------------------

| الخاصية                            | up | up -d |
| ---------------------------------- | -- | ----- |
| تشغيل الحاويات                     | ✔  | ✔     |
| تشغيل في الخلفية                   | ✖  | ✔     |
| إظهار الـ Logs                     | ✔  | ✖     |
| استخدام التيرمنال بعد التشغيل      | ✖  | ✔     |
| إيقاف الحاويات عند إغلاق التيرمنال | ✔  | ✖     |

---

# ------------------------------------------

# ✔ أيهما الأفضل لمشروع ياقوت؟

* للتشغيل اليومي → **استعمل up -d**
* لفحص المشاكل ورؤية الأخطاء → **استعمل up**

